{"ast":null,"code":"import React,{useState,useEffect}from'react';import BookCard from'./BookCard';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const NewBooks=()=>{// กำหนด State สำหรับจัดการข้อมูล\nconst[newBooks,setNewBooks]=useState([]);const[loading,setLoading]=useState(true);const[error,setError]=useState(null);useEffect(()=>{const fetchNewBooks=async()=>{try{setLoading(true);// เรียก API เพื่อดึงข้อมูลหนังสือใหม่\nconst response=await fetch('http://localhost:8080/api/v1/books/new');if(!response.ok){throw new Error('Failed to fetch new books');}const data=await response.json();setNewBooks(data);setError(null);}catch(err){setError(err.message);console.error('Error fetching new books:',err);}finally{setLoading(false);}};// เรียกใช้ฟังก์ชันดึงข้อมูล\nfetchNewBooks();},[]);// [] = dependency array ว่าง = รันครั้งเดียว\n// กรณีกำลังโหลดข้อมูล\nif(loading){return/*#__PURE__*/_jsx(\"div\",{className:\"grid md:grid-cols-2 lg:grid-cols-3 gap-8\",children:/*#__PURE__*/_jsx(\"div\",{className:\"text-center py-8 col-span-full\",children:\"Loading new arrivals...\"})});}// กรณีเกิดข้อผิดพลาด\nif(error){return/*#__PURE__*/_jsx(\"div\",{className:\"grid md:grid-cols-2 lg:grid-cols-3 gap-8\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"text-center py-8 col-span-full text-red-600\",children:[\"Error: \",error]})});}// กรณีแสดงผลข้อมูลปกติ\nreturn/*#__PURE__*/_jsx(\"div\",{className:\"grid md:grid-cols-2 lg:grid-cols-3 gap-8\",children:newBooks.map(book=>/*#__PURE__*/_jsx(BookCard,{book:book},book.id))});};export default NewBooks;","map":{"version":3,"names":["React","useState","useEffect","BookCard","jsx","_jsx","jsxs","_jsxs","NewBooks","newBooks","setNewBooks","loading","setLoading","error","setError","fetchNewBooks","response","fetch","ok","Error","data","json","err","message","console","className","children","map","book","id"],"sources":["/workspaces/befe-660710245/week9-lab2/MyBookStore-main/src/components/NewBooks.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport BookCard from './BookCard';\r\n\r\nconst NewBooks = () => {\r\n  // กำหนด State สำหรับจัดการข้อมูล\r\n  const [newBooks, setNewBooks] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState(null);\r\n\r\n  useEffect(() => {\r\n    const fetchNewBooks = async () => {\r\n      try {\r\n        setLoading(true);\r\n        \r\n        // เรียก API เพื่อดึงข้อมูลหนังสือใหม่\r\n        const response = await fetch('http://localhost:8080/api/v1/books/new');\r\n\r\n        if (!response.ok) {\r\n          throw new Error('Failed to fetch new books');\r\n        }\r\n\r\n        const data = await response.json();\r\n        setNewBooks(data);\r\n        setError(null);\r\n        \r\n      } catch (err) {\r\n        setError(err.message);\r\n        console.error('Error fetching new books:', err);\r\n        \r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n\r\n    // เรียกใช้ฟังก์ชันดึงข้อมูล\r\n    fetchNewBooks();\r\n  }, []); // [] = dependency array ว่าง = รันครั้งเดียว\r\n\r\n  // กรณีกำลังโหลดข้อมูล\r\n  if (loading) {\r\n    return (\r\n      <div className=\"grid md:grid-cols-2 lg:grid-cols-3 gap-8\">\r\n        <div className=\"text-center py-8 col-span-full\">\r\n          Loading new arrivals...\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  // กรณีเกิดข้อผิดพลาด\r\n  if (error) {\r\n    return (\r\n      <div className=\"grid md:grid-cols-2 lg:grid-cols-3 gap-8\">\r\n        <div className=\"text-center py-8 col-span-full text-red-600\">\r\n          Error: {error}\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  // กรณีแสดงผลข้อมูลปกติ\r\n  return (\r\n    <div className=\"grid md:grid-cols-2 lg:grid-cols-3 gap-8\">\r\n      {newBooks.map(book => (\r\n        <BookCard \r\n          key={book.id} \r\n          book={book} \r\n        />\r\n      ))}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default NewBooks;"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAClD,MAAO,CAAAC,QAAQ,KAAM,YAAY,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAElC,KAAM,CAAAC,QAAQ,CAAGA,CAAA,GAAM,CACrB;AACA,KAAM,CAACC,QAAQ,CAAEC,WAAW,CAAC,CAAGT,QAAQ,CAAC,EAAE,CAAC,CAC5C,KAAM,CAACU,OAAO,CAAEC,UAAU,CAAC,CAAGX,QAAQ,CAAC,IAAI,CAAC,CAC5C,KAAM,CAACY,KAAK,CAAEC,QAAQ,CAAC,CAAGb,QAAQ,CAAC,IAAI,CAAC,CAExCC,SAAS,CAAC,IAAM,CACd,KAAM,CAAAa,aAAa,CAAG,KAAAA,CAAA,GAAY,CAChC,GAAI,CACFH,UAAU,CAAC,IAAI,CAAC,CAEhB;AACA,KAAM,CAAAI,QAAQ,CAAG,KAAM,CAAAC,KAAK,CAAC,wCAAwC,CAAC,CAEtE,GAAI,CAACD,QAAQ,CAACE,EAAE,CAAE,CAChB,KAAM,IAAI,CAAAC,KAAK,CAAC,2BAA2B,CAAC,CAC9C,CAEA,KAAM,CAAAC,IAAI,CAAG,KAAM,CAAAJ,QAAQ,CAACK,IAAI,CAAC,CAAC,CAClCX,WAAW,CAACU,IAAI,CAAC,CACjBN,QAAQ,CAAC,IAAI,CAAC,CAEhB,CAAE,MAAOQ,GAAG,CAAE,CACZR,QAAQ,CAACQ,GAAG,CAACC,OAAO,CAAC,CACrBC,OAAO,CAACX,KAAK,CAAC,2BAA2B,CAAES,GAAG,CAAC,CAEjD,CAAC,OAAS,CACRV,UAAU,CAAC,KAAK,CAAC,CACnB,CACF,CAAC,CAED;AACAG,aAAa,CAAC,CAAC,CACjB,CAAC,CAAE,EAAE,CAAC,CAAE;AAER;AACA,GAAIJ,OAAO,CAAE,CACX,mBACEN,IAAA,QAAKoB,SAAS,CAAC,0CAA0C,CAAAC,QAAA,cACvDrB,IAAA,QAAKoB,SAAS,CAAC,gCAAgC,CAAAC,QAAA,CAAC,yBAEhD,CAAK,CAAC,CACH,CAAC,CAEV,CAEA;AACA,GAAIb,KAAK,CAAE,CACT,mBACER,IAAA,QAAKoB,SAAS,CAAC,0CAA0C,CAAAC,QAAA,cACvDnB,KAAA,QAAKkB,SAAS,CAAC,6CAA6C,CAAAC,QAAA,EAAC,SACpD,CAACb,KAAK,EACV,CAAC,CACH,CAAC,CAEV,CAEA;AACA,mBACER,IAAA,QAAKoB,SAAS,CAAC,0CAA0C,CAAAC,QAAA,CACtDjB,QAAQ,CAACkB,GAAG,CAACC,IAAI,eAChBvB,IAAA,CAACF,QAAQ,EAEPyB,IAAI,CAAEA,IAAK,EADNA,IAAI,CAACC,EAEX,CACF,CAAC,CACC,CAAC,CAEV,CAAC,CAED,cAAe,CAAArB,QAAQ","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}