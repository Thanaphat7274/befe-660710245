{"ast":null,"code":"import React,{useState,useEffect}from'react';import BookCard from'./BookCard';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const FeaturedBooks=()=>{// กำหนด State สำหรับจัดการข้อมูล\nconst[featuredBooks,setFeaturedBooks]=useState([]);const[loading,setLoading]=useState(true);const[error,setError]=useState(null);useEffect(()=>{const fetchBooks=async()=>{try{setLoading(true);// เรียก API เพื่อดึงข้อมูลหนังสือ\nconst response=await fetch('http://localhost:8080/api/v1/books');if(!response.ok){throw new Error('Failed to fetch books');}// ถ้าไม่สำเร็จจะโยน Error\nconst data=await response.json();// สุ่มหนังสือ 3 เล่ม\nconst shuffled=[...data].sort(()=>0.5-Math.random());const selected=shuffled.slice(0,3);setFeaturedBooks(selected);setError(null);}catch(err){setError(err.message);console.error('Error fetching books:',err);}finally{setLoading(false);}};// เรียกใช้ฟังก์ชันดึงข้อมูล\nfetchBooks();},[]);// [] = dependency array ว่าง = รันครั้งเดียว\n// กรณีกำลังโหลดข้อมูล\nif(loading){return/*#__PURE__*/_jsx(\"div\",{className:\"grid md:grid-cols-2 lg:grid-cols-3 gap-8\",children:/*#__PURE__*/_jsx(\"div\",{className:\"text-center py-8 col-span-full\",children:\"Loading...\"})});}// กรณีเกิดข้อผิดพลาด\nif(error){return/*#__PURE__*/_jsx(\"div\",{className:\"grid md:grid-cols-2 lg:grid-cols-3 gap-8\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"text-center py-8 col-span-full text-red-600\",children:[\"Error: \",error]})});}// กรณีแสดงผลข้อมูลปกติ\nreturn/*#__PURE__*/_jsx(\"div\",{className:\"grid md:grid-cols-2 lg:grid-cols-3 gap-8\",children:featuredBooks.map(book=>/*#__PURE__*///แสดงผลผ่าน BookCard component\n_jsx(BookCard,{book:book},book.id))});};export default FeaturedBooks;","map":{"version":3,"names":["React","useState","useEffect","BookCard","jsx","_jsx","jsxs","_jsxs","FeaturedBooks","featuredBooks","setFeaturedBooks","loading","setLoading","error","setError","fetchBooks","response","fetch","ok","Error","data","json","shuffled","sort","Math","random","selected","slice","err","message","console","className","children","map","book","id"],"sources":["/workspaces/befe-660710245/week9-lab2/MyBookStore-main/src/components/FeaturedBook.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport BookCard from './BookCard';\r\n\r\nconst FeaturedBooks = () => {\r\n  // กำหนด State สำหรับจัดการข้อมูล\r\n  const [featuredBooks, setFeaturedBooks] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState(null);\r\n\r\n  useEffect(() => {\r\n    const fetchBooks = async () => {\r\n      try {\r\n        setLoading(true);\r\n        \r\n        // เรียก API เพื่อดึงข้อมูลหนังสือ\r\n        const response = await fetch('http://localhost:8080/api/v1/books');\r\n\r\n        if (!response.ok) {\r\n          throw new Error('Failed to fetch books');\r\n        }\r\n        // ถ้าไม่สำเร็จจะโยน Error\r\n\r\n        const data = await response.json();\r\n\r\n        // สุ่มหนังสือ 3 เล่ม\r\n        const shuffled = [...data].sort(() => 0.5 - Math.random());\r\n        const selected = shuffled.slice(0, 3);\r\n\r\n        setFeaturedBooks(selected);\r\n        setError(null);\r\n        \r\n      } catch (err) {\r\n        setError(err.message);\r\n        console.error('Error fetching books:', err);\r\n        \r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n\r\n    // เรียกใช้ฟังก์ชันดึงข้อมูล\r\n    fetchBooks();\r\n  }, []); // [] = dependency array ว่าง = รันครั้งเดียว\r\n\r\n  // กรณีกำลังโหลดข้อมูล\r\n  if (loading) {\r\n    return (\r\n      <div className=\"grid md:grid-cols-2 lg:grid-cols-3 gap-8\">\r\n        <div className=\"text-center py-8 col-span-full\">\r\n          Loading...\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  // กรณีเกิดข้อผิดพลาด\r\n  if (error) {\r\n    return (\r\n      <div className=\"grid md:grid-cols-2 lg:grid-cols-3 gap-8\">\r\n        <div className=\"text-center py-8 col-span-full text-red-600\">\r\n          Error: {error}\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  // กรณีแสดงผลข้อมูลปกติ\r\n  return (\r\n    <div className=\"grid md:grid-cols-2 lg:grid-cols-3 gap-8\">\r\n      {featuredBooks.map(book => (\r\n        //แสดงผลผ่าน BookCard component\r\n        <BookCard \r\n          key={book.id} \r\n          book={book} \r\n        />\r\n      ))}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default FeaturedBooks;"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAClD,MAAO,CAAAC,QAAQ,KAAM,YAAY,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAElC,KAAM,CAAAC,aAAa,CAAGA,CAAA,GAAM,CAC1B;AACA,KAAM,CAACC,aAAa,CAAEC,gBAAgB,CAAC,CAAGT,QAAQ,CAAC,EAAE,CAAC,CACtD,KAAM,CAACU,OAAO,CAAEC,UAAU,CAAC,CAAGX,QAAQ,CAAC,IAAI,CAAC,CAC5C,KAAM,CAACY,KAAK,CAAEC,QAAQ,CAAC,CAAGb,QAAQ,CAAC,IAAI,CAAC,CAExCC,SAAS,CAAC,IAAM,CACd,KAAM,CAAAa,UAAU,CAAG,KAAAA,CAAA,GAAY,CAC7B,GAAI,CACFH,UAAU,CAAC,IAAI,CAAC,CAEhB;AACA,KAAM,CAAAI,QAAQ,CAAG,KAAM,CAAAC,KAAK,CAAC,oCAAoC,CAAC,CAElE,GAAI,CAACD,QAAQ,CAACE,EAAE,CAAE,CAChB,KAAM,IAAI,CAAAC,KAAK,CAAC,uBAAuB,CAAC,CAC1C,CACA;AAEA,KAAM,CAAAC,IAAI,CAAG,KAAM,CAAAJ,QAAQ,CAACK,IAAI,CAAC,CAAC,CAElC;AACA,KAAM,CAAAC,QAAQ,CAAG,CAAC,GAAGF,IAAI,CAAC,CAACG,IAAI,CAAC,IAAM,GAAG,CAAGC,IAAI,CAACC,MAAM,CAAC,CAAC,CAAC,CAC1D,KAAM,CAAAC,QAAQ,CAAGJ,QAAQ,CAACK,KAAK,CAAC,CAAC,CAAE,CAAC,CAAC,CAErCjB,gBAAgB,CAACgB,QAAQ,CAAC,CAC1BZ,QAAQ,CAAC,IAAI,CAAC,CAEhB,CAAE,MAAOc,GAAG,CAAE,CACZd,QAAQ,CAACc,GAAG,CAACC,OAAO,CAAC,CACrBC,OAAO,CAACjB,KAAK,CAAC,uBAAuB,CAAEe,GAAG,CAAC,CAE7C,CAAC,OAAS,CACRhB,UAAU,CAAC,KAAK,CAAC,CACnB,CACF,CAAC,CAED;AACAG,UAAU,CAAC,CAAC,CACd,CAAC,CAAE,EAAE,CAAC,CAAE;AAER;AACA,GAAIJ,OAAO,CAAE,CACX,mBACEN,IAAA,QAAK0B,SAAS,CAAC,0CAA0C,CAAAC,QAAA,cACvD3B,IAAA,QAAK0B,SAAS,CAAC,gCAAgC,CAAAC,QAAA,CAAC,YAEhD,CAAK,CAAC,CACH,CAAC,CAEV,CAEA;AACA,GAAInB,KAAK,CAAE,CACT,mBACER,IAAA,QAAK0B,SAAS,CAAC,0CAA0C,CAAAC,QAAA,cACvDzB,KAAA,QAAKwB,SAAS,CAAC,6CAA6C,CAAAC,QAAA,EAAC,SACpD,CAACnB,KAAK,EACV,CAAC,CACH,CAAC,CAEV,CAEA;AACA,mBACER,IAAA,QAAK0B,SAAS,CAAC,0CAA0C,CAAAC,QAAA,CACtDvB,aAAa,CAACwB,GAAG,CAACC,IAAI,eACrB;AACA7B,IAAA,CAACF,QAAQ,EAEP+B,IAAI,CAAEA,IAAK,EADNA,IAAI,CAACC,EAEX,CACF,CAAC,CACC,CAAC,CAEV,CAAC,CAED,cAAe,CAAA3B,aAAa","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}